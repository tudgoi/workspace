{% extends "dynamic.html" %}

{% block toolbar %}
{% call super() %}
<a href="../{{ id }}.html">View</a>
{% endblock toolbar %}

{% block content %}
<dl>
    <dt>Name</dt>
    <dd>
        {% block name %}
        <div hx-target="this" hx-swap="outerHTML">
            <div>{{ name }}</div>
            <button hx-get="/{{ typ }}/{{ id }}/name/edit">
                Edit
            </button>
        </div>
        {% endblock %}
    </dd>
    <dt>Photo</dt>
    <dd>
        {% block photo %}
        <div hx-target="this" hx-swap="outerHTML">
            {% if let Some(photo) = photo %}
            <div><label>URL</label>: <a href="{{ photo.url }}" target="_blank">{{ photo.url }} â†—</a></div>
            <div>
                <label>Attribution</label>:
                {% if let Some(attribution) = photo.attribution %}
                {{ attribution }}
                {% else %}
                No attribution available
                {% endif %}
            </div>
            <button hx-get="/{{ typ }}/{{ id }}/photo/edit">Edit</button>
            {% else %}
            <div>No photo available.</div>
            <button hx-get="/{{ typ }}/{{ id }}/photo/edit">Add</button>
            {% endif %}
        </div>
        {% endblock %}
    </dd>
    <dt>Contacts</dt>
    <dd>
        {% block contact %}
        <div hx-target="this" hx-swap="outerHTML">
            {% if contacts.is_empty() %}
            <div>No contacts available.</div>
            {% else %}
            {% for (contact_type, value) in contacts %}
            <div>
                <label>{{ contact_type }}</label>: {{ value }}
            </div>
            {% endfor %}
            {% endif %}

            {% if contacts.len() < data::ContactType::VARIANTS.len() %}
            <button hx-get="/{{ typ }}/{{ id }}/contact/add">
                Add
            </button>
            {% endif %}
        </div>
        {% endblock contact %}
    </dd>
</dl>
{% endblock content %}