{% extends "base.html" %}
{% import "macros.html" as macros %}
{% block content %}
<style>
  main {
    display: grid;
    column-gap: 1em;
    row-gap: 0.5em;
    grid-template-areas:
      "toolbar"
      "title"
      "photo"
      "contacts"
      "quondams"
      "sources";
    margin-bottom: 1em;
  }
  @media (min-width: 40em) {
    main {
      grid-template-columns: 1fr 3fr;
      grid-template-rows: min-content min-content 1fr 1fr auto auto;
      grid-template-areas:
        "toolbar toolbar"
        "photo title"
        "photo contacts"
        "quondams quondams"
        "sources sources";
    }
  }
</style>
<main>
  <div class="toolbar">
    {% if page.dynamic %}
    <a href="{{office.id}}/edit">Edit</a>
    {% endif %}
  </div>
  <div class="photo">
    {% if photo %}
      {{ macros::render_photo(photo=photo, alt=office.name) }}
    {% elif offices and (offices | length > 0) and offices[0].photo %}
      {{ macros::render_photo(photo=offices[0].photo, alt=office.name) }}
    {% else %}
      {{ macros::render_photo(photo=config.defaults.photo, alt=office.name) }}
    {% endif %}
  </div>
  <div class="title">
    <h2>{{ office.name }}</h2>
    {% if incumbent %}
      {{ macros::render_person(person=incumbent) }}
    {% endif %}
    <hr/>
  </div>
    
  </div>
  <div class="contacts">
    {% if contacts %}
      {{ macros::render_contacts(contacts=contacts) }}
    {% endif %}
  </div>

  <div class="quondams">
    {% if quondams %}
      <hr/>
      <dl>
        <dt>Quondam</dt>
        <dd><ul>
        {% for q in quondams %}
            <li>{{ macros::render_person(person=q.person) }}, <em>{{ q.start }} to {{ q.end }}</em></li>
        {% endfor %}
        </ul></dd>
      </dl>
    {% endif %}
  </div>
  <div class="sources">
    {% if page.extra.sources %}
    <hr>
    <details>
      <summary>Sources</summary>
      <ul>
        {% for url in page.extra.sources %}
          <li><a href="{{ url }}">{{ url }}</a></li>
        {% endfor %}
      </ul>
    </details>
    {% endif %}
  </div>
</main>
{% endblock content %}

{% block updated %}
  {% if metadata.updated %}
  Last updated on {{ metadata.commit_date | date(format="%d %B, %Y")}}
  {% else %}
  Local version
  {% endif %}
{% endblock updated %}
